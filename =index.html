<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sagar Faustus Moravia ‚Äî WoodWolf Kennels</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Outfit:wght@300;400;500;600&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg-deep:#070707;--bg-card:#111;--bg-elevated:#181818;--bg-hover:#1e1e1e;
  --text-primary:#f5f5f5;--text-secondary:#999;--text-muted:#555;
  --border-subtle:rgba(255,255,255,.06);--border-hover:rgba(255,255,255,.12);
  --gold:#c9a96e;--gold-dim:rgba(201,169,110,.15);
  --serif:'Cormorant Garamond',Georgia,serif;--sans:'Outfit',system-ui,sans-serif;--mono:'JetBrains Mono',monospace;
  --ease:cubic-bezier(.4,0,.2,1);--ease-out:cubic-bezier(0,.55,.45,1);
}
html{font-size:16px;scroll-behavior:smooth;-webkit-font-smoothing:antialiased}
body{background:var(--bg-deep);color:var(--text-primary);font-family:var(--sans);line-height:1.6;overflow-x:hidden}
::selection{background:var(--gold);color:var(--bg-deep)}

/* ===== HERO ===== */
.hero{position:relative;height:100vh;min-height:600px;display:flex;align-items:flex-end;overflow:hidden}
.hero-bg{position:absolute;inset:0;background:linear-gradient(180deg,rgba(7,7,7,0) 0%,rgba(7,7,7,.3) 40%,rgba(7,7,7,.92) 85%,var(--bg-deep) 100%),
  url('https://static.wixstatic.com/media/e2b819_8d01e7615ddb46e7b9a20e402687568d~mv2.jpg/v1/fill/w_1920,h_1080,al_c,q_90/DSC_0211.jpg') center 20%/cover no-repeat;
  filter:grayscale(40%) brightness(.85) contrast(1.05);animation:heroZoom 25s ease-in-out infinite alternate}
@keyframes heroZoom{from{transform:scale(1)}to{transform:scale(1.06)}}
.hero-content{position:relative;z-index:2;padding:0 clamp(1.5rem,5vw,6rem) clamp(3rem,8vh,6rem);max-width:1400px;width:100%}
.hero-label{font-family:var(--sans);font-size:.75rem;font-weight:500;letter-spacing:.25em;text-transform:uppercase;color:var(--gold);margin-bottom:1rem;opacity:0;animation:fadeUp .8s var(--ease) .3s forwards}
.hero-name{font-family:var(--serif);font-size:clamp(2.8rem,7vw,6rem);font-weight:300;line-height:1.05;letter-spacing:-.02em;margin-bottom:1rem;opacity:0;animation:fadeUp .8s var(--ease) .5s forwards}
.hero-name em{font-style:italic;color:var(--gold)}
.hero-subtitle{font-size:clamp(.85rem,1.8vw,1.05rem);font-weight:300;color:var(--text-secondary);letter-spacing:.04em;opacity:0;animation:fadeUp .8s var(--ease) .7s forwards}
.hero-badges{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:1.5rem;opacity:0;animation:fadeUp .8s var(--ease) .9s forwards}
.badge{padding:.35rem .85rem;border:1px solid var(--border-subtle);border-radius:2px;font-size:.7rem;font-weight:500;letter-spacing:.12em;text-transform:uppercase;color:var(--text-secondary);background:rgba(255,255,255,.03);backdrop-filter:blur(10px);transition:all .3s var(--ease)}
.badge:hover{border-color:var(--gold);color:var(--gold)}
.badge.highlight{border-color:var(--gold);color:var(--gold);background:var(--gold-dim)}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* ===== CATEGORY NAV ===== */
.category-nav{position:sticky;top:0;z-index:100;background:rgba(7,7,7,.88);backdrop-filter:blur(24px);border-bottom:1px solid var(--border-subtle);padding:0 clamp(1rem,3vw,4rem);overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
.category-nav::-webkit-scrollbar{display:none}
.nav-inner{display:flex;gap:0;max-width:1200px;margin:0 auto}
.nav-tab{padding:1rem 1.5rem;font-size:.72rem;font-weight:500;letter-spacing:.18em;text-transform:uppercase;color:var(--text-muted);cursor:pointer;border-bottom:2px solid transparent;transition:all .3s var(--ease);white-space:nowrap;position:relative}
.nav-tab:hover{color:var(--text-secondary)}
.nav-tab.active{color:var(--gold);border-bottom-color:var(--gold)}
@media(max-width:768px){.nav-tab{padding:.85rem 1rem;font-size:.65rem;letter-spacing:.14em}}

/* ===== SECTIONS ===== */
.section{display:none;padding:clamp(3rem,6vw,6rem) clamp(1.5rem,5vw,6rem);max-width:1200px;margin:0 auto;min-height:60vh}
.section.active{display:block;animation:sectionIn .5s var(--ease)}
@keyframes sectionIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.section-header{margin-bottom:3rem}
.section-title{font-family:var(--serif);font-size:clamp(2rem,4vw,3.2rem);font-weight:300;letter-spacing:-.01em;margin-bottom:.75rem}
.section-desc{font-size:.95rem;font-weight:300;color:var(--text-secondary);max-width:680px;line-height:1.7}

/* ===== TEMPERAMENT SECTION ===== */
.temperament-grid{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:2rem}
@media(max-width:768px){.temperament-grid{grid-template-columns:1fr}}
.trait-card{background:var(--bg-card);border:1px solid var(--border-subtle);padding:2rem;transition:all .4s var(--ease);position:relative;overflow:hidden}
.trait-card::before{content:'';position:absolute;top:0;left:0;width:3px;height:100%;background:var(--gold);transform:scaleY(0);transform-origin:top;transition:transform .4s var(--ease)}
.trait-card:hover::before{transform:scaleY(1)}
.trait-card:hover{border-color:var(--border-hover);background:var(--bg-elevated)}
.trait-label{font-size:.65rem;font-weight:500;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:.75rem}
.trait-value{font-family:var(--serif);font-size:1.4rem;font-weight:400;margin-bottom:.5rem}
.trait-desc{font-size:.85rem;color:var(--text-secondary);line-height:1.6;font-weight:300}
.video-placeholder{margin-top:3rem;aspect-ratio:16/9;background:var(--bg-card);border:1px solid var(--border-subtle);display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative;overflow:hidden;transition:all .4s var(--ease)}
.video-placeholder:hover{border-color:var(--border-hover)}
.video-placeholder .play-icon{width:64px;height:64px;border:2px solid var(--gold);border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .3s var(--ease)}
.video-placeholder:hover .play-icon{background:var(--gold);transform:scale(1.05)}
.video-placeholder .play-icon::after{content:'';border:8px solid transparent;border-left:14px solid var(--gold);margin-left:4px;transition:border-color .3s}
.video-placeholder:hover .play-icon::after{border-left-color:var(--bg-deep)}

/* ===== HEALTH SECTION ===== */
.health-summary{display:flex;align-items:center;gap:1.5rem;padding:1.5rem 2rem;background:linear-gradient(135deg,rgba(201,169,110,.08),rgba(201,169,110,.02));border:1px solid rgba(201,169,110,.2);margin-bottom:3rem}
.health-check{font-family:var(--serif);font-size:2.4rem;color:var(--gold)}
.health-summary-text h3{font-family:var(--sans);font-size:.95rem;font-weight:500;margin-bottom:.25rem}
.health-summary-text p{font-size:.8rem;color:var(--text-secondary);font-weight:300}
.health-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}
.health-card{background:var(--bg-card);border:1px solid var(--border-subtle);padding:1.5rem;cursor:pointer;transition:all .3s var(--ease)}
.health-card:hover{border-color:var(--border-hover);transform:translateY(-2px)}
.health-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}
.health-card-test{font-size:.65rem;font-weight:500;letter-spacing:.18em;text-transform:uppercase;color:var(--text-muted)}
.health-card-result{font-size:.75rem;font-weight:600;color:#4ade80;letter-spacing:.05em}
.health-card-result.excellent{color:var(--gold)}
.health-card-detail{font-family:var(--serif);font-size:1.2rem;margin-bottom:.5rem}
.health-card-registry{font-size:.75rem;color:var(--text-muted);font-weight:300}
.health-card-expand{display:none;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border-subtle);font-size:.82rem;color:var(--text-secondary);line-height:1.7;font-weight:300}
.health-card.expanded .health-card-expand{display:block;animation:sectionIn .3s var(--ease)}

/* ===== PEDIGREE SECTION ===== */
.pedigree-controls{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:2rem;align-items:center;justify-content:space-between}
.pedigree-mode-toggle{display:flex;background:var(--bg-card);border:1px solid var(--border-subtle);overflow:hidden}
.mode-btn{padding:.6rem 1.2rem;font-size:.7rem;font-weight:500;letter-spacing:.12em;text-transform:uppercase;color:var(--text-muted);cursor:pointer;border:none;background:transparent;transition:all .3s var(--ease);font-family:var(--sans)}
.mode-btn.active{background:var(--gold);color:var(--bg-deep)}
.pedigree-actions{display:flex;gap:.75rem}
.action-btn{padding:.6rem 1.2rem;font-size:.7rem;font-weight:500;letter-spacing:.1em;text-transform:uppercase;color:var(--text-secondary);cursor:pointer;border:1px solid var(--border-subtle);background:transparent;transition:all .3s var(--ease);font-family:var(--sans);display:flex;align-items:center;gap:.5rem}
.action-btn:hover{border-color:var(--gold);color:var(--gold)}
.action-btn svg{width:14px;height:14px}

/* Pedigree Tree */
.pedigree-tree{position:relative;overflow-x:auto;overflow-y:visible;-webkit-overflow-scrolling:touch;padding:2rem 0}
.tree-container{display:flex;align-items:stretch;gap:0;min-width:fit-content;position:relative}
.tree-generation{display:flex;flex-direction:column;justify-content:space-around;gap:8px;position:relative;min-width:200px}
.tree-generation.gen-0{min-width:240px}
@media(max-width:768px){.tree-generation{min-width:160px}.tree-generation.gen-0{min-width:200px}}

/* Tree Nodes */
.tree-node{background:var(--bg-card);border:1px solid var(--border-subtle);padding:12px 14px;cursor:pointer;transition:all .35s var(--ease);position:relative;display:flex;align-items:center;gap:10px;min-height:64px}
.tree-node:hover{border-color:var(--gold);background:var(--bg-elevated);transform:translateX(3px)}
.tree-node.male{border-left:3px solid #4a90d9}
.tree-node.female{border-left:3px solid #d94a8c}
.tree-node.root{border:1px solid var(--gold);background:linear-gradient(135deg,rgba(201,169,110,.08),rgba(201,169,110,.02))}
.tree-node.root .node-name{color:var(--gold)}
.node-photo{width:40px;height:40px;border-radius:50%;object-fit:cover;border:1.5px solid var(--border-subtle);flex-shrink:0;background:var(--bg-elevated)}
.node-info{flex:1;min-width:0}
.node-name{font-family:var(--serif);font-size:.9rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.node-titles{font-size:.6rem;color:var(--text-muted);letter-spacing:.08em;margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.node-health{display:flex;gap:4px;margin-top:4px}
.node-health-pip{width:6px;height:6px;border-radius:50%;background:#4ade80}
.node-health-pip.unknown{background:var(--text-muted)}
.node-expand-icon{position:absolute;right:8px;top:50%;transform:translateY(-50%);width:16px;height:16px;color:var(--text-muted);transition:color .3s}
.tree-node:hover .node-expand-icon{color:var(--gold)}

/* Simple mode */
.pedigree-tree.simple .node-health,.pedigree-tree.simple .node-titles{display:none}
.pedigree-tree.simple .tree-node{min-height:52px;padding:8px 12px}
.pedigree-tree.simple .node-name{font-size:.82rem}

/* Tree connector lines */
.tree-connectors{position:absolute;inset:0;pointer-events:none;z-index:0}

/* ===== NODE MODAL (Pedigree Detail Popup) ===== */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);backdrop-filter:blur(8px);z-index:1000;display:none;align-items:center;justify-content:center;padding:1rem;animation:modalBgIn .3s var(--ease)}
.modal-overlay.active{display:flex}
@keyframes modalBgIn{from{opacity:0}to{opacity:1}}
.modal{background:var(--bg-card);border:1px solid var(--border-subtle);max-width:560px;width:100%;max-height:90vh;overflow-y:auto;animation:modalIn .4s var(--ease-out);position:relative}
@keyframes modalIn{from{opacity:0;transform:translateY(24px) scale(.97)}to{opacity:1;transform:translateY(0) scale(1)}}
.modal-close{position:absolute;top:16px;right:16px;width:36px;height:36px;border:1px solid var(--border-subtle);background:rgba(0,0,0,.5);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:2;color:var(--text-secondary);font-size:1.1rem;transition:all .3s var(--ease)}
.modal-close:hover{border-color:var(--gold);color:var(--gold)}
.modal-hero{height:220px;background-size:cover;background-position:center;position:relative}
.modal-hero::after{content:'';position:absolute;bottom:0;left:0;right:0;height:50%;background:linear-gradient(to top,var(--bg-card),transparent)}
.modal-hero-placeholder{height:220px;background:linear-gradient(135deg,var(--bg-elevated),var(--bg-card));display:flex;align-items:center;justify-content:center;color:var(--text-muted);font-size:3rem;position:relative}
.modal-hero-placeholder::after{content:'';position:absolute;bottom:0;left:0;right:0;height:50%;background:linear-gradient(to top,var(--bg-card),transparent)}
.modal-body{padding:2rem}
.modal-name{font-family:var(--serif);font-size:1.6rem;font-weight:400;margin-bottom:.25rem}
.modal-meta{font-size:.75rem;color:var(--text-muted);letter-spacing:.05em;margin-bottom:1.5rem}
.modal-section{margin-bottom:1.5rem}
.modal-section-title{font-size:.6rem;font-weight:600;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:.75rem}
.modal-badges{display:flex;flex-wrap:wrap;gap:6px}
.modal-badge{padding:4px 10px;background:var(--bg-elevated);border:1px solid var(--border-subtle);font-size:.7rem;color:var(--text-secondary);font-weight:400}
.modal-badge.gold{border-color:rgba(201,169,110,.3);color:var(--gold);background:var(--gold-dim)}
.modal-health-row{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid var(--border-subtle);font-size:.82rem}
.modal-health-row:last-child{border-bottom:none}
.modal-health-label{color:var(--text-secondary);font-weight:300}
.modal-health-value{font-weight:500;color:#4ade80}
.modal-health-value.na{color:var(--text-muted)}
.modal-desc{font-size:.88rem;color:var(--text-secondary);line-height:1.7;font-weight:300}
.modal-media{margin-top:1.5rem}
.modal-media-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.modal-media-thumb{aspect-ratio:1;background:var(--bg-elevated);border:1px solid var(--border-subtle);cursor:pointer;overflow:hidden;transition:all .3s var(--ease)}
.modal-media-thumb:hover{border-color:var(--gold)}
.modal-media-thumb img{width:100%;height:100%;object-fit:cover;filter:grayscale(60%);transition:filter .4s}
.modal-media-thumb:hover img{filter:grayscale(0)}
.modal-video-btn{display:flex;align-items:center;gap:.5rem;padding:.65rem 1.2rem;background:transparent;border:1px solid var(--border-subtle);color:var(--text-secondary);font-family:var(--sans);font-size:.75rem;letter-spacing:.1em;text-transform:uppercase;cursor:pointer;transition:all .3s var(--ease);margin-top:.75rem;width:100%}
.modal-video-btn:hover{border-color:var(--gold);color:var(--gold)}

/* ===== TITLES SECTION ===== */
.titles-category{margin-bottom:3rem}
.titles-cat-header{font-size:.65rem;font-weight:600;letter-spacing:.22em;text-transform:uppercase;color:var(--gold);margin-bottom:1.25rem;padding-bottom:.75rem;border-bottom:1px solid var(--border-subtle)}
.title-row{display:flex;justify-content:space-between;align-items:flex-start;padding:1rem 0;border-bottom:1px solid var(--border-subtle);cursor:pointer;transition:all .3s var(--ease);gap:1rem}
.title-row:hover{padding-left:.5rem}
.title-row:last-child{border-bottom:none}
.title-abbr{font-family:var(--mono);font-size:.9rem;font-weight:400;min-width:60px;color:var(--text-primary)}
.title-full{font-size:.85rem;color:var(--text-secondary);font-weight:300;flex:1}
.title-explain{font-size:.78rem;color:var(--text-muted);font-weight:300;text-align:right;max-width:200px}
.title-expand{display:none;padding:.75rem 0 0;font-size:.82rem;color:var(--text-secondary);line-height:1.7;font-weight:300;grid-column:1/-1}
.title-row.expanded .title-expand{display:block;animation:sectionIn .3s var(--ease)}
.title-row.expanded{flex-wrap:wrap}

/* ===== OFFSPRING SECTION ===== */
.litter-card{background:var(--bg-card);border:1px solid var(--border-subtle);margin-bottom:1.5rem;overflow:hidden;transition:all .3s var(--ease)}
.litter-card:hover{border-color:var(--border-hover)}
.litter-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;cursor:pointer;transition:background .3s var(--ease)}
.litter-header:hover{background:var(--bg-elevated)}
.litter-info h3{font-family:var(--serif);font-size:1.1rem;font-weight:400;margin-bottom:.25rem}
.litter-info p{font-size:.78rem;color:var(--text-muted);font-weight:300}
.litter-dam-preview{display:flex;align-items:center;gap:.75rem;padding:.5rem .75rem;background:var(--bg-elevated);border:1px solid var(--border-subtle);transition:all .3s var(--ease)}
.litter-dam-preview:hover{border-color:var(--gold)}
.litter-dam-photo{width:36px;height:36px;border-radius:50%;background:var(--bg-card);border:1px solid var(--border-subtle)}
.litter-dam-text{font-size:.75rem;color:var(--text-secondary)}
.litter-dam-text span{display:block;font-size:.6rem;color:var(--text-muted);letter-spacing:.1em;text-transform:uppercase}
.litter-toggle{width:28px;height:28px;display:flex;align-items:center;justify-content:center;color:var(--text-muted);transition:all .3s var(--ease)}
.litter-card.expanded .litter-toggle{transform:rotate(180deg);color:var(--gold)}
.litter-body{display:none;padding:0 1.5rem 1.5rem;border-top:1px solid var(--border-subtle)}
.litter-card.expanded .litter-body{display:block;animation:sectionIn .3s var(--ease)}
.litter-dam-detail{padding:1rem;background:var(--bg-elevated);border:1px solid var(--border-subtle);margin-bottom:1.25rem;margin-top:1rem}
.litter-dam-detail h4{font-family:var(--serif);font-size:1rem;margin-bottom:.5rem;color:var(--gold)}
.litter-dam-detail p{font-size:.82rem;color:var(--text-secondary);line-height:1.6;font-weight:300}
.puppy-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.75rem}
.puppy-card{background:var(--bg-elevated);border:1px solid var(--border-subtle);padding:1rem;transition:all .3s var(--ease);cursor:pointer;position:relative}
.puppy-card:hover{border-color:var(--gold);transform:translateY(-2px)}
.puppy-name{font-family:var(--serif);font-size:.95rem;margin-bottom:.25rem}
.puppy-meta{font-size:.72rem;color:var(--text-muted);margin-bottom:.5rem}
.puppy-status{display:inline-block;padding:2px 8px;font-size:.6rem;font-weight:600;letter-spacing:.12em;text-transform:uppercase}
.puppy-status.kept{background:rgba(201,169,110,.15);color:var(--gold);border:1px solid rgba(201,169,110,.3)}
.puppy-status.placed{background:rgba(74,222,128,.1);color:#4ade80;border:1px solid rgba(74,222,128,.2)}
.puppy-status.available{background:rgba(96,165,250,.1);color:#60a5fa;border:1px solid rgba(96,165,250,.2)}

/* Dam Tooltip on hover */
.dam-tooltip{position:absolute;bottom:100%;left:50%;transform:translateX(-50%) translateY(-8px);background:var(--bg-card);border:1px solid var(--gold);padding:1rem;width:280px;z-index:50;display:none;pointer-events:none;box-shadow:0 8px 32px rgba(0,0,0,.5)}
.litter-dam-preview:hover .dam-tooltip{display:block;animation:sectionIn .2s var(--ease)}
.dam-tooltip h5{font-family:var(--serif);font-size:.9rem;color:var(--gold);margin-bottom:.5rem}
.dam-tooltip p{font-size:.75rem;color:var(--text-secondary);line-height:1.5;font-weight:300}

/* ===== STUD SERVICE BAR ===== */
.stud-bar{position:fixed;bottom:0;left:0;right:0;z-index:200;background:rgba(7,7,7,.92);backdrop-filter:blur(24px);border-top:1px solid var(--border-subtle);padding:.85rem clamp(1rem,3vw,4rem);display:flex;align-items:center;justify-content:space-between;transform:translateY(100%);transition:transform .4s var(--ease)}
.stud-bar.visible{transform:translateY(0)}
.stud-bar-info{display:flex;align-items:center;gap:1.5rem}
.stud-bar-name{font-family:var(--serif);font-size:1rem}
.stud-bar-price{font-size:.75rem;color:var(--text-muted)}.stud-bar-price strong{color:var(--gold)}
.stud-bar-cta{padding:.7rem 2rem;background:var(--gold);color:var(--bg-deep);font-family:var(--sans);font-size:.72rem;font-weight:600;letter-spacing:.15em;text-transform:uppercase;border:none;cursor:pointer;transition:all .3s var(--ease)}
.stud-bar-cta:hover{background:#dbb97a;transform:translateY(-1px)}
@media(max-width:600px){
  .stud-bar-name{display:none}
  .stud-bar{justify-content:center;gap:1rem}
}

/* ===== PDF EXPORT OVERLAY ===== */
.pdf-generating{position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:2000;display:none;align-items:center;justify-content:center;flex-direction:column;gap:1rem}
.pdf-generating.active{display:flex}
.pdf-spinner{width:32px;height:32px;border:2px solid var(--border-subtle);border-top-color:var(--gold);border-radius:50%;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.pdf-text{font-size:.85rem;color:var(--text-secondary)}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--text-muted);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}

/* ===== MOBILE PEDIGREE ===== */
@media(max-width:768px){
  .pedigree-controls{flex-direction:column;align-items:stretch}
  .pedigree-actions{justify-content:stretch}
  .action-btn{flex:1;justify-content:center}
  .tree-node{padding:8px 10px;min-height:52px}
  .node-photo{width:32px;height:32px}
  .node-name{font-size:.78rem}
  .tree-generation{min-width:140px;gap:4px}
  .tree-generation.gen-0{min-width:170px}
}

/* ===== MOBILE RESPONSIVE ===== */
@media(max-width:480px){
  .modal{max-height:95vh;margin:0}
  .modal-body{padding:1.25rem}
  .hero-badges{gap:.35rem}
  .badge{padding:.25rem .6rem;font-size:.6rem}
  .puppy-grid{grid-template-columns:1fr}
  .health-grid{grid-template-columns:1fr}
}

/* Pedigree scroll hint for mobile */
.scroll-hint{display:none;text-align:center;padding:.75rem;font-size:.72rem;color:var(--text-muted);letter-spacing:.08em}
.scroll-hint span{display:inline-block;animation:scrollHint 2s ease infinite}
@keyframes scrollHint{0%,100%{transform:translateX(0)}50%{transform:translateX(8px)}}
@media(max-width:768px){.scroll-hint{display:block}}
</style>
</head>
<body>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg"></div>
  <div class="hero-content">
    <div class="hero-label">WoodWolf Kennels ‚Äî Stud Dog</div>
    <h1 class="hero-name">Sagar Faustus Moravia <em>"Sagi"</em></h1>
    <p class="hero-subtitle">Czech Import ¬∑ IGP3 ¬∑ Lifetime Breed Survey ¬∑ TSB Pronounced ¬∑ Dark Sable Long Coat</p>
    <div class="hero-badges">
      <span class="badge highlight">IGP3</span>
      <span class="badge highlight">TSB Pronounced</span>
      <span class="badge">HD A1 (SV)</span>
      <span class="badge">DM Clear</span>
      <span class="badge">Lifetime KKL</span>
      <span class="badge">Embark Clear</span>
    </div>
  </div>
</section>

<!-- CATEGORY NAVIGATION -->
<nav class="category-nav" id="categoryNav">
  <div class="nav-inner">
    <div class="nav-tab active" data-section="temperament">Temperament</div>
    <div class="nav-tab" data-section="health">Health</div>
    <div class="nav-tab" data-section="pedigree">Pedigree</div>
    <div class="nav-tab" data-section="titles">Titles & Working</div>
    <div class="nav-tab" data-section="offspring">Offspring</div>
  </div>
</nav>

<!-- TEMPERAMENT -->
<section class="section active" id="temperament">
  <div class="section-header">
    <h2 class="section-title">Temperament</h2>
    <p class="section-desc">Sagi displays exceptional handler engagement with a joyful, willing demeanor. He's a breeze to work ‚Äî always eager and ready. He lives harmoniously with other dogs and brings energy and confidence to every task.</p>
  </div>
  <div class="temperament-grid">
    <div class="trait-card">
      <div class="trait-label">Drive</div>
      <div class="trait-value">High Ball & Prey Drive</div>
      <div class="trait-desc">Exceptional toy and prey drive makes him highly trainable and responsive. Always willing to engage, making him ideal for sport and working applications.</div>
    </div>
    <div class="trait-card">
      <div class="trait-label">Handler Bond</div>
      <div class="trait-value">High Engagement</div>
      <div class="trait-desc">Sagi is incredibly handler-focused and eager to please. He reads his handler well and responds with enthusiasm to direction and praise.</div>
    </div>
    <div class="trait-card">
      <div class="trait-label">Protection</div>
      <div class="trait-value">Hard Grips ¬∑ Strong Courage</div>
      <div class="trait-desc">Displays confident, committed grips in protection work with natural courage. His TSB Pronounced rating confirms exceptional self-assurance under stress.</div>
    </div>
    <div class="trait-card">
      <div class="trait-label">Social</div>
      <div class="trait-value">Dog-Friendly ¬∑ Stable</div>
      <div class="trait-desc">Lives peacefully with other dogs in the home. His stable temperament and social nature make him an ideal companion as well as a working prospect.</div>
    </div>
  </div>
  <div class="video-placeholder" onclick="this.innerHTML='<div style=\'color:var(--text-muted);font-size:.85rem\'>Video embed placeholder ‚Äî breeder would add working footage here</div>'">
    <div class="play-icon"></div>
  </div>
</section>

<!-- HEALTH -->
<section class="section" id="health">
  <div class="section-header">
    <h2 class="section-title">Health Clearances</h2>
    <p class="section-desc">Dual-certified across Czech and SV (German) registries ‚Äî both at the highest possible marks. Every test independently verifiable.</p>
  </div>
  <div class="health-summary">
    <div class="health-check">‚úì</div>
    <div class="health-summary-text">
      <h3>8 of 8 Health Tests Clear ‚Äî Dual Registry Certified</h3>
      <p>Czech Republic (ƒåMKU) and German SV certifications both at top marks</p>
    </div>
  </div>
  <div class="health-grid">
    <div class="health-card" onclick="this.classList.toggle('expanded')">
      <div class="health-card-header">
        <span class="health-card-test">Hips (Czech)</span>
        <span class="health-card-result excellent">HD: A</span>
      </div>
      <div class="health-card-detail">HD A ‚Äî Normal</div>
      <div class="health-card-registry">Czech ƒåMKU Registry</div>
      <div class="health-card-expand">"A" is the highest hip rating in the Czech system, indicating completely normal hip joint conformation with no signs of dysplasia. This is the gold standard for breeding stock.</div>
    </div>
    <div class="health-card" onclick="this.classList.toggle('expanded')">
      <div class="health-card-header">
        <span class="health-card-test">Hips (SV)</span>
        <span class="health-card-result excellent">HD: A1</span>
      </div>
      <div class="health-card-detail">HD A1 ‚Äî Excellent</div>
      <div class="health-card-registry">German SV Registry</div>
      <div class="health-card-expand">A1 is the highest possible SV hip rating ‚Äî "Excellent." The SV system is independently evaluated by German-certified radiologists, making this a dual-confirmation of elite hip structure.</div>
    </div>
    <div class="health-card" onclick="this.classList.toggle('expanded')">
      <div class="health-card-header">
        <span class="health-card-test">Elbows (Czech)</span>
        <span class="health-card-result">ED: 0</span>
      </div>
      <div class="health-card-detail">ED 0 ‚Äî Clear</div>
      <div class="health-card-registry">Czech ƒåMKU Registry</div>
      <div class="health-card-expand">ED 0 indicates no evidence of elbow dysplasia. Clean elbows in a large working breed are essential for long-term soundness and performance.</div>
    </div>
    <div class="health-card" onclick="this.classList.toggle('expanded')">
      <div class="health-card-header">
        <span class="health-card-test">Elbows (SV)</span>
        <span class="health-card-result excellent">ED: A1</span>
      </div>
      <div class="health-card-detail">ED A1 ‚Äî Excellent</div>
      <div class="health-card-registry">German SV Registry</div>
      <div class="health-card-expand">A1 elbows under the SV system confirm Sagi's excellent joint structure independently of his Czech certification. Dual-system confirmation at top marks is uncommon.</div>
    </div>
    <div class="health-card" onclick="this.classList.toggle('expanded')">
      <div class="health-card-header">
        <span class="health-card-test">Spine</span>
        <span class="health-card-result">Spondylosis: 0</span>
      </div>
      <div class="health-card-detail">Spondylosis Free</div>
      <div class="health-card-registry">Czech ƒåMKU Registry</div>
      <div class="health-card-expand">Spondylosis 0 means the spine shows no degenerative changes or bridging between vertebrae. Important for a working dog's long-term mobility and comfort.</div>
    </div>
    <div class="health-card" onclick="this.classList.toggle('expanded')">
      <div class="health-card-header">
        <span class="health-card-test">DM (Degenerative Myelopathy)</span>
        <span class="health-card-result">N/N ‚Äî Clear</span>
      </div>
      <div class="health-card-detail">DM N/N ‚Äî Genetically Clear</div>
      <div class="health-card-registry">DNA Tested</div>
      <div class="health-card-expand">N/N means Sagi carries zero copies of the DM gene mutation. He cannot develop or pass on this devastating neurological disease. WoodWolf maintains a strict DM-clear policy.</div>
    </div>
    <div class="health-card" onclick="this.classList.toggle('expanded')">
      <div class="health-card-header">
        <span class="health-card-test">Embark Panel</span>
        <span class="health-card-result">Clear</span>
      </div>
      <div class="health-card-detail">Full Genetic Panel ‚Äî Clear</div>
      <div class="health-card-registry">Embark Veterinary</div>
      <div class="health-card-expand">Embark tests for 230+ genetic health conditions and traits. Sagi's full panel returned clear, confirming he is free of tested genetic diseases.</div>
    </div>
    <div class="health-card" onclick="this.classList.toggle('expanded')">
      <div class="health-card-header">
        <span class="health-card-test">DNA on File</span>
        <span class="health-card-result excellent">SV + AKC</span>
      </div>
      <div class="health-card-detail">DNA Profiled ‚Äî Dual Registry</div>
      <div class="health-card-registry">SV (German) & AKC</div>
      <div class="health-card-expand">DNA profiles are on file with both the German SV and the American Kennel Club, ensuring verified parentage and identity for all breeding records.</div>
    </div>
  </div>
</section>

<!-- PEDIGREE -->
<section class="section" id="pedigree">
  <div class="section-header">
    <h2 class="section-title">Pedigree</h2>
    <p class="section-desc">Three generations of proven Czech working lines from the renowned Faustus Moravia kennel. Click any ancestor for detailed achievements, health data, and media.</p>
  </div>
  <div class="pedigree-controls">
    <div class="pedigree-mode-toggle">
      <button class="mode-btn active" data-mode="simple" onclick="setPedigreeMode('simple')">Overview</button>
      <button class="mode-btn" data-mode="detailed" onclick="setPedigreeMode('detailed')">Breeder Detail</button>
    </div>
    <div class="pedigree-actions">
      <button class="action-btn" onclick="exportPedigreePDF()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg>
        Download PDF
      </button>
      <button class="action-btn" onclick="window.open('https://www.working-dog.com/dogs-details/6770891/Sagar-Faustus-Moravia','_blank')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"/></svg>
        Working-Dog
      </button>
    </div>
  </div>
  <div class="scroll-hint">Scroll horizontally to explore the full pedigree <span>‚Üí</span></div>
  <div class="pedigree-tree simple" id="pedigreeTree"></div>
</section>

<!-- TITLES & WORKING -->
<section class="section" id="titles">
  <div class="section-header">
    <h2 class="section-title">Titles & Working Skills</h2>
    <p class="section-desc">Every abbreviation explained. Click any title for a plain-language breakdown of what it means and why it matters.</p>
  </div>
  <div class="titles-category">
    <div class="titles-cat-header">Working Titles</div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">IGP3</span>
      <span class="title-full">Internationale Gebrauchshund Pr√ºfung 3</span>
      <span class="title-explain">Highest level</span>
      <div class="title-expand">IGP3 is the pinnacle of working dog sport ‚Äî testing tracking, obedience, and protection at the most demanding level. The dog must demonstrate exceptional nose work across long aged tracks, precise off-leash obedience in distracting environments, and confident protection work including searching, holding, and escorting. Very few dogs achieve this title.</div>
    </div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">IGP2</span>
      <span class="title-full">Internationale Gebrauchshund Pr√ºfung 2</span>
      <span class="title-explain">Advanced level</span>
      <div class="title-expand">IGP2 tests intermediate-advanced tracking, obedience, and protection skills. It requires longer tracks, more complex obedience patterns, and more demanding protection scenarios than IGP1.</div>
    </div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">IGP1</span>
      <span class="title-full">Internationale Gebrauchshund Pr√ºfung 1</span>
      <span class="title-explain">Foundation level</span>
      <div class="title-expand">IGP1 is the entry-level working dog title in the international system, testing basic tracking, obedience, and protection. Even this foundation level requires significant training and natural ability.</div>
    </div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">FO</span>
      <span class="title-full">F√§hrtenhund Pr√ºfung (Tracking)</span>
      <span class="title-explain">Tracking specialist</span>
      <div class="title-expand">FO is a dedicated tracking title demonstrating the dog's ability to follow scent trails over varying terrain and conditions. It showcases strong nose work independent of the obedience/protection phases.</div>
    </div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">BH/VT</span>
      <span class="title-full">Begleithundpr√ºfung / Verkehrstest</span>
      <span class="title-explain">Temperament prerequisite</span>
      <div class="title-expand">The BH/VT is the mandatory temperament and traffic-safety test required before any IGP title. The dog must demonstrate stable behavior in public, around crowds, traffic, and other dogs. It's the gateway test that proves a dog is safe and manageable in society.</div>
    </div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">AD</span>
      <span class="title-full">Ausdauerpr√ºfung (Endurance Test)</span>
      <span class="title-explain">Physical fitness</span>
      <div class="title-expand">The AD requires the dog to trot alongside a bicycle for 20 kilometers (12.4 miles) at a steady pace, followed by a simple obedience check. It proves the dog has the physical fitness, structure, and endurance expected of the breed.</div>
    </div>
  </div>
  <div class="titles-category">
    <div class="titles-cat-header">Breed Survey & Conformation</div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">KKL</span>
      <span class="title-full">K√∂rklasse ‚Äî Lifetime Breed Survey</span>
      <span class="title-explain" style="color:var(--gold)">Elite distinction</span>
      <div class="title-expand">A Lifetime Breed Survey (KKL) is an extensive evaluation of the dog's structure, temperament, and working ability conducted by a certified breed surveyor. Sagi's lifetime survey was conducted by USCA and carries a TSB rating of "Pronounced" ‚Äî the highest possible drive and self-assurance assessment. This is a rare honor that certifies him as an exemplary representative of the breed for life.</div>
    </div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">TSB: P</span>
      <span class="title-full">Triebveranlagung, Selbstsicherheit, Belastbarkeit ‚Äî Pronounced</span>
      <span class="title-explain" style="color:var(--gold)">Highest rating</span>
      <div class="title-expand">TSB evaluates three critical traits: drive (Triebveranlagung), self-assurance (Selbstsicherheit), and stress capacity (Belastbarkeit). "Pronounced" is the highest possible rating, indicating exceptional natural drives, rock-solid confidence, and the ability to recover quickly from stress. This is the most important behavioral assessment in the German Shepherd breed evaluation system.</div>
    </div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">Ang*</span>
      <span class="title-full">Angek√∂rt ‚Äî Surveyed / Approved for Breeding</span>
      <span class="title-explain">Breed approved</span>
      <div class="title-expand">The Angek√∂rt designation means the dog has passed a breed survey evaluating structure, temperament, and working ability, and has been officially approved for breeding. The asterisk (*) indicates recommended for breeding.</div>
    </div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">VD</span>
      <span class="title-full">Vorz√ºglich (Czech Show Rating)</span>
      <span class="title-explain">Very Good</span>
      <div class="title-expand">VD ("Very Good") in the Czech conformation system evaluates the dog's physical structure against the breed standard. It assesses movement, angulation, proportions, and overall breed type.</div>
    </div>
    <div class="title-row" onclick="this.classList.toggle('expanded')">
      <span class="title-abbr">G1</span>
      <span class="title-full">Good (USCA Show Rating)</span>
      <span class="title-explain">USCA Conformation</span>
      <div class="title-expand">The USCA conformation rating evaluates the dog's physical structure in the American branch of the SV system. Working-line dogs are often rated differently than show-line dogs in conformation events.</div>
    </div>
  </div>
</section>

<!-- OFFSPRING -->
<section class="section" id="offspring">
  <div class="section-header">
    <h2 class="section-title">Offspring</h2>
    <p class="section-desc">Sagi's producing record. Each litter is listed with the dam's information and individual puppy achievements. Hover or tap the dam's name for her credentials.</p>
  </div>

  <div class="litter-card" onclick="this.classList.toggle('expanded')">
    <div class="litter-header">
      <div style="display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap">
        <div class="litter-info">
          <h3>A-Litter Vom WoodWolf</h3>
          <p>Born March 2024 ¬∑ 8 puppies (5M / 3F)</p>
        </div>
        <div class="litter-dam-preview" onclick="event.stopPropagation()" style="position:relative">
          <div class="litter-dam-photo"></div>
          <div class="litter-dam-text">
            <span>Dam</span>
            Cora Calimera Moravia
          </div>
          <div class="dam-tooltip">
            <h5>Cora Calimera Moravia</h5>
            <p>Czech Import ¬∑ IPO1 ¬∑ HD A ¬∑ ED 0 ¬∑ DM N/N<br>Dark sable, excellent temperament and work ethic. Strong maternal instincts with proven track record of healthy, well-structured offspring.</p>
          </div>
        </div>
      </div>
      <div class="litter-toggle">‚ñº</div>
    </div>
    <div class="litter-body">
      <div class="litter-dam-detail">
        <h4>Dam: Cora Calimera Moravia</h4>
        <p>Czech Import ¬∑ IPO1 ¬∑ HD A ¬∑ ED 0 ¬∑ DM N/N ¬∑ Embark Clear<br>Dark sable female imported from Czech Republic. Calm, confident temperament with strong drives. Excellent maternal instincts with hands-on, attentive care of puppies from day one.</p>
      </div>
      <div class="puppy-grid">
        <div class="puppy-card">
          <div class="puppy-name">Aggro Vom WoodWolf</div>
          <div class="puppy-meta">Male ¬∑ Dark Sable ¬∑ Long Coat</div>
          <div class="puppy-status kept">Kept ‚Äî Kennel Prospect</div>
        </div>
        <div class="puppy-card">
          <div class="puppy-name">Athena Vom WoodWolf</div>
          <div class="puppy-meta">Female ¬∑ Black Sable</div>
          <div class="puppy-status placed">Placed ‚Äî Working Home</div>
        </div>
        <div class="puppy-card">
          <div class="puppy-name">Apollo Vom WoodWolf</div>
          <div class="puppy-meta">Male ¬∑ Dark Sable</div>
          <div class="puppy-status placed">Placed ‚Äî Family Home</div>
        </div>
        <div class="puppy-card">
          <div class="puppy-name">Aria Vom WoodWolf</div>
          <div class="puppy-meta">Female ¬∑ Black Sable ¬∑ Long Coat</div>
          <div class="puppy-status placed">Placed ‚Äî Sport Home</div>
        </div>
      </div>
    </div>
  </div>

  <div class="litter-card" onclick="this.classList.toggle('expanded')">
    <div class="litter-header">
      <div style="display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap">
        <div class="litter-info">
          <h3>B-Litter Vom WoodWolf</h3>
          <p>Born August 2024 ¬∑ 6 puppies (3M / 3F)</p>
        </div>
        <div class="litter-dam-preview" onclick="event.stopPropagation()" style="position:relative">
          <div class="litter-dam-photo"></div>
          <div class="litter-dam-text">
            <span>Dam</span>
            Shye-Ann European K9
          </div>
          <div class="dam-tooltip">
            <h5>Shye-Ann European K9 Training Base</h5>
            <p>BH ¬∑ HD A ¬∑ ED Normal ¬∑ DM N/N<br>Confident, high-drive female with excellent structure. Strong nerves and natural working ability.</p>
          </div>
        </div>
      </div>
      <div class="litter-toggle">‚ñº</div>
    </div>
    <div class="litter-body">
      <div class="litter-dam-detail">
        <h4>Dam: Shye-Ann European K9 Training Base</h4>
        <p>BH ¬∑ HD A ¬∑ ED Normal ¬∑ DM N/N ¬∑ Embark Clear<br>Athletic, confident female with excellent nerve strength and a natural working temperament. Produces puppies with strong drives and stable character.</p>
      </div>
      <div class="puppy-grid">
        <div class="puppy-card">
          <div class="puppy-name">Brutus Vom WoodWolf</div>
          <div class="puppy-meta">Male ¬∑ Dark Sable</div>
          <div class="puppy-status available">Available</div>
        </div>
        <div class="puppy-card">
          <div class="puppy-name">Bella Vom WoodWolf</div>
          <div class="puppy-meta">Female ¬∑ Bi-Color</div>
          <div class="puppy-status placed">Placed ‚Äî K9 Unit</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- STUD SERVICE BAR -->
<div class="stud-bar" id="studBar">
  <div class="stud-bar-info">
    <span class="stud-bar-name">Sagar Faustus Moravia</span>
    <span class="stud-bar-price">Live Cover <strong>$1,500</strong> ¬∑ Frozen <strong>$1,000</strong></span>
  </div>
  <button class="stud-bar-cta" onclick="window.location.href='mailto:woodwolfkennels@gmail.com?subject=Stud%20Inquiry%20-%20Sagar'">Inquire About Breeding</button>
</div>

<!-- NODE DETAIL MODAL -->
<div class="modal-overlay" id="nodeModal">
  <div class="modal">
    <div class="modal-close" onclick="closeModal()">‚úï</div>
    <div id="modalHero" class="modal-hero-placeholder">üêï</div>
    <div class="modal-body">
      <div class="modal-name" id="modalName"></div>
      <div class="modal-meta" id="modalMeta"></div>
      <div class="modal-section" id="modalTitles" style="display:none">
        <div class="modal-section-title">Titles & Certifications</div>
        <div class="modal-badges" id="modalBadges"></div>
      </div>
      <div class="modal-section" id="modalHealth" style="display:none">
        <div class="modal-section-title">Health Results</div>
        <div id="modalHealthRows"></div>
      </div>
      <div class="modal-section" id="modalDesc" style="display:none">
        <div class="modal-section-title">Notes</div>
        <div class="modal-desc" id="modalDescText"></div>
      </div>
      <div class="modal-section" id="modalMedia" style="display:none">
        <div class="modal-section-title">Media</div>
        <button class="modal-video-btn" onclick="alert('Video player would open here')">‚ñ∂ &nbsp;Watch Working Video</button>
      </div>
    </div>
  </div>
</div>

<!-- PDF GENERATING OVERLAY -->
<div class="pdf-generating" id="pdfOverlay">
  <div class="pdf-spinner"></div>
  <div class="pdf-text">Generating pedigree PDF‚Ä¶</div>
</div>

<script>
// ===== PEDIGREE DATA =====
const pedigreeData = {
  name: "Sagar Faustus Moravia",
  callName: "Sagi",
  sex: "male",
  dob: "July 7, 2019",
  reg: "CMKU DS/120xxx/19",
  titles: ["FO", "BH/VT", "AD", "IGP1", "IGP2", "IGP3", "KKL", "Ang*"],
  health: { HD: "A (CZ) / A1 (SV)", ED: "0 (CZ) / A1 (SV)", DM: "N/N Clear", Spondy: "0", Embark: "Clear" },
  desc: "Czech import from Faustus Moravia kennel. Dark/black sable long coat, 70-75lbs, 25\" at withers. Lifetime Breed Survey with TSB Pronounced. Exceptional handler engagement, high drive, hard grips.",
  hasVideo: true,
  sire: {
    name: "Chiro Provocativo",
    sex: "male",
    dob: "Feb 8, 2013",
    reg: "CMKU 89326/13/17",
    titles: ["Working Titled"],
    health: { DM: "N/N", HD: "0/0", ED: "0/0", DNA: "SV" },
    desc: "Strong producing sire from Czech working lines. DM clear with excellent hips and elbows.",
    sire: {
      name: "Cox Vikar CS",
      sex: "male",
      dob: "Aug 25, 2006",
      reg: "CMKU/DS 60346",
      titles: [],
      health: { HD: "Fast Normal" },
      desc: "Foundation sire in the Vikar CS line.",
      sire: { name: "Nobby Vikar CS", sex: "male", dob: "Oct 26, 2009", reg: "CMKU DS/75589/09", titles: [], health: { HD: "Normal", ED: "Normal" }, desc: "Czech working line male." },
      dam: { name: "Hoky Va-Pe", sex: "female", dob: "Jun 23, 2004", titles: [], health: {}, desc: "Working line female." }
    },
    dam: {
      name: "Bauli Vikar CS",
      sex: "female",
      dob: "Mar 25, 2006",
      titles: [],
      health: {},
      desc: "Vikar CS kennel female.",
      sire: { name: "Veleno (CMKU DS 55340)", sex: "male", dob: "Apr 30, 2001", titles: [], health: {}, desc: "" },
      dam: { name: "Indy von der Maineiche", sex: "female", dob: "Aug 16, 2004", titles: [], health: {}, desc: "" }
    }
  },
  dam: {
    name: "Kasiopea Faustus Moravia",
    sex: "female",
    dob: "May 8, 2014",
    reg: "CMKU DS/94819/14",
    titles: [],
    health: { HD: "A/A (DKK)", ED: "0/0 (DLK)" },
    desc: "Dam from the Faustus Moravia kennel. Excellent hip and elbow ratings under DKK system.",
    sire: {
      name: "Yankee ze St≈ô√≠brn√©ho kamene CS",
      sex: "male",
      dob: "Nov 15, 2009",
      reg: "CMKU/DS 75856",
      titles: [],
      health: { HD: "Normal", ED: "Normal" },
      desc: "Czech working line sire.",
      sire: { name: "Unknown Sire", sex: "male", titles: [], health: {}, desc: "" },
      dam: { name: "Unknown Dam", sex: "female", titles: [], health: {}, desc: "" }
    },
    dam: {
      name: "Charrissma Faustus Moravia",
      sex: "female",
      dob: "Jun 29, 2010",
      reg: "CMKU/DS 78964/10/13",
      titles: ["BH", "IPO1", "FPR3", "ZOP", "5V1/P"],
      health: { HD: "0/0", ED: "0/0", DNA: "Ausland" },
      desc: "Proven producing dam from Faustus Moravia. Multiple titles including IPO1 and tracking certifications. Foundation female of the kennel program.",
      sire: { name: "Woltair Gaja-Nova", sex: "male", titles: [], health: {}, desc: "Gaja-Nova kennel sire." },
      dam: { name: "Arma z Duhov√©ho lesa", sex: "female", titles: [], health: {}, desc: "Forest-line female." }
    }
  }
};

// ===== BUILD PEDIGREE TREE =====
function buildTree() {
  const container = document.getElementById('pedigreeTree');
  container.innerHTML = '';
  
  // Flatten tree into generations
  const generations = [[], [], [], []]; // gen 0 = Sagi, gen 1 = parents, gen 2 = grandparents, gen 3 = great-grandparents
  
  function addToGen(node, gen) {
    if (!node || gen > 3) return;
    generations[gen].push(node);
    if (node.sire) addToGen(node.sire, gen + 1);
    if (node.dam) addToGen(node.dam, gen + 1);
  }
  addToGen(pedigreeData, 0);
  
  const treeEl = document.createElement('div');
  treeEl.className = 'tree-container';
  
  generations.forEach((gen, gi) => {
    const genEl = document.createElement('div');
    genEl.className = `tree-generation gen-${gi}`;
    
    gen.forEach(dog => {
      const node = document.createElement('div');
      node.className = `tree-node ${dog.sex} ${gi === 0 ? 'root' : ''}`;
      node.onclick = () => openNodeModal(dog);
      
      const healthPips = Object.keys(dog.health || {}).length;
      const titlesStr = (dog.titles || []).join(' ¬∑ ');
      
      node.innerHTML = `
        <div class="node-photo" style="background:#1a1a1a;display:flex;align-items:center;justify-content:center;font-size:.7rem;color:var(--text-muted)">${dog.sex === 'male' ? '‚ôÇ' : '‚ôÄ'}</div>
        <div class="node-info">
          <div class="node-name">${dog.callName || dog.name}</div>
          <div class="node-titles">${titlesStr || (dog.dob ? dog.dob : '‚Äî')}</div>
          <div class="node-health">
            ${healthPips > 0 ? Array(Math.min(healthPips, 4)).fill('<div class="node-health-pip"></div>').join('') : '<div class="node-health-pip unknown"></div>'}
          </div>
        </div>
        <div class="node-expand-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><path d="M9 18l6-6-6-6"/></svg>
        </div>
      `;
      genEl.appendChild(node);
    });
    
    treeEl.appendChild(genEl);
  });
  
  container.appendChild(treeEl);
}

// ===== PEDIGREE MODE =====
function setPedigreeMode(mode) {
  document.querySelectorAll('.mode-btn').forEach(b => b.classList.toggle('active', b.dataset.mode === mode));
  const tree = document.getElementById('pedigreeTree');
  tree.classList.toggle('simple', mode === 'simple');
  tree.classList.toggle('detailed', mode === 'detailed');
}

// ===== NODE MODAL =====
function openNodeModal(dog) {
  const modal = document.getElementById('nodeModal');
  document.getElementById('modalName').textContent = dog.name;
  document.getElementById('modalMeta').textContent = [dog.dob, dog.reg, dog.sex === 'male' ? 'Male' : 'Female'].filter(Boolean).join(' ¬∑ ');
  
  // Titles
  const titlesSection = document.getElementById('modalTitles');
  const badgesEl = document.getElementById('modalBadges');
  if (dog.titles && dog.titles.length) {
    badgesEl.innerHTML = dog.titles.map(t => `<span class="modal-badge gold">${t}</span>`).join('');
    titlesSection.style.display = 'block';
  } else {
    titlesSection.style.display = 'none';
  }
  
  // Health
  const healthSection = document.getElementById('modalHealth');
  const healthRows = document.getElementById('modalHealthRows');
  if (dog.health && Object.keys(dog.health).length) {
    healthRows.innerHTML = Object.entries(dog.health).map(([k,v]) => 
      `<div class="modal-health-row"><span class="modal-health-label">${k}</span><span class="modal-health-value">${v}</span></div>`
    ).join('');
    healthSection.style.display = 'block';
  } else {
    healthSection.style.display = 'none';
  }
  
  // Description
  const descSection = document.getElementById('modalDesc');
  if (dog.desc) {
    document.getElementById('modalDescText').textContent = dog.desc;
    descSection.style.display = 'block';
  } else {
    descSection.style.display = 'none';
  }
  
  // Media
  document.getElementById('modalMedia').style.display = dog.hasVideo ? 'block' : 'none';
  
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('nodeModal').classList.remove('active');
  document.body.style.overflow = '';
}

document.getElementById('nodeModal').addEventListener('click', function(e) {
  if (e.target === this) closeModal();
});

// ===== SECTION NAVIGATION =====
document.querySelectorAll('.nav-tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.section).classList.add('active');
  });
});

// ===== STICKY STUD BAR =====
const studBar = document.getElementById('studBar');
const hero = document.querySelector('.hero');
const observer = new IntersectionObserver(([entry]) => {
  studBar.classList.toggle('visible', !entry.isIntersecting);
}, { threshold: 0 });
observer.observe(hero);

// ===== PDF EXPORT =====
async function exportPedigreePDF() {
  const overlay = document.getElementById('pdfOverlay');
  overlay.classList.add('active');
  
  // Ensure pedigree section is visible for capture
  const pedigreeSection = document.getElementById('pedigree');
  const wasActive = pedigreeSection.classList.contains('active');
  if (!wasActive) {
    pedigreeSection.style.display = 'block';
    pedigreeSection.style.position = 'absolute';
    pedigreeSection.style.left = '-9999px';
  }
  
  try {
    const treeEl = document.getElementById('pedigreeTree');
    // Switch to detailed mode for PDF
    treeEl.classList.remove('simple');
    treeEl.classList.add('detailed');
    
    const canvas = await html2canvas(treeEl, {
      backgroundColor: '#070707',
      scale: 2,
      useCORS: true,
      logging: false,
      width: treeEl.scrollWidth,
      height: treeEl.scrollHeight
    });
    
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });
    
    // Title header
    pdf.setFillColor(7, 7, 7);
    pdf.rect(0, 0, 297, 210, 'F');
    pdf.setTextColor(201, 169, 110);
    pdf.setFontSize(10);
    pdf.text('WOODWOLF KENNELS ‚Äî PEDIGREE', 15, 12);
    pdf.setTextColor(245, 245, 245);
    pdf.setFontSize(18);
    pdf.text('Sagar Faustus Moravia "Sagi"', 15, 22);
    pdf.setTextColor(153, 153, 153);
    pdf.setFontSize(8);
    pdf.text('IGP3 ¬∑ HD A1 (SV) ¬∑ DM N/N ¬∑ Lifetime KKL ¬∑ TSB Pronounced ¬∑ Czech Import', 15, 28);
    
    // Tree image
    const imgData = canvas.toDataURL('image/png');
    const pdfW = 267;
    const ratio = canvas.height / canvas.width;
    const pdfH = Math.min(pdfW * ratio, 165);
    pdf.addImage(imgData, 'PNG', 15, 35, pdfW, pdfH);
    
    // Footer
    pdf.setTextColor(85, 85, 85);
    pdf.setFontSize(7);
    pdf.text('woodwolfkennels.com ¬∑ woodwolfkennels@gmail.com ¬∑ 706-993-5897', 15, 202);
    pdf.text(`Generated ${new Date().toLocaleDateString()}`, 250, 202);
    
    pdf.save('Sagar-Faustus-Moravia-Pedigree.pdf');
    
    // Restore mode
    const activeMode = document.querySelector('.mode-btn.active')?.dataset.mode || 'simple';
    setPedigreeMode(activeMode);
    
  } catch (err) {
    console.error('PDF export error:', err);
    alert('PDF generation encountered an error. Please try again.');
  }
  
  if (!wasActive) {
    pedigreeSection.style.display = '';
    pedigreeSection.style.position = '';
    pedigreeSection.style.left = '';
  }
  
  overlay.classList.remove('active');
}

// ===== KEYBOARD SHORTCUTS =====
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') closeModal();
});

// ===== INIT =====
buildTree();
</script>

</body>
</html>
